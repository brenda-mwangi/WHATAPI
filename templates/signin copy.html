{% extends "base.html" %}
{%block title%}Log In{%endblock%}
{% block content %}
<section class="sign-in">
    <div class="container">
        <div class="signin-content">
            <div class="signin-image">
                <figure><img src="/static/images/signin-image.jpg" alt="sign up image"></figure>
                <a href="#" class="signup-image-link">Create an account</a>
            </div>

            <div class="signin-form">
                <h2 class="form-title">Sign in</h2>
                <form method="POST" onsubmit="meme()" class="register-form" id="login-form">
                    <div class="form-group">
                        <label for="username"><i class="zmdi zmdi-account material-icons-name"></i></label>
                        <input type="text" name="username" id="username" placeholder="Your Name" />
                    </div>
                    <div class="form-group">
                        <label for="password"><i class="zmdi zmdi-lock"></i></label>
                        <input type="password" name="password" id="password" placeholder="Password" />
                    </div>
                    <div class="form-group">
                        <input type="checkbox" name="remember-me" id="remember-me" class="agree-term" />
                        <label for="remember-me" class="label-agree-term"><span><span></span></span>Remember me</label>
                    </div>
                    <div class="form-group form-button">
                        <input type="submit" name="signin" id="signin" class="form-submit" value="Log in" />
                    </div>
                </form>
                <div class="social-login">
                    <span class="social-label">Or login with</span>
                    <ul class="socials">
                        <li><a href="#"><i class="display-flex-center zmdi zmdi-facebook"></i></a></li>
                        <li><a href="#"><i class="display-flex-center zmdi zmdi-twitter"></i></a></li>
                        <li><a href="#"><i class="display-flex-center zmdi zmdi-google"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
<script>
    function meme() {
            // Prevent the default form submission behavior
            event.preventDefault();

            // Get the form data
            var yourName = document.getElementById('username').value;
            var yourPass = document.getElementById('password').value;

            // Create FormData object
            var formData = new FormData();
            formData.append('username', yourName);
            formData.append('password', yourPass);

            // Make the Ajax POST request
            $.ajax({
                url: '/auth/login', // Replace with the actual endpoint
                type: 'POST',
                contentType: false, // Remove contentType for FormData
                processData: false, // Remove processData for FormData
                data: formData, // Send FormData object directly

                success: function (response) {
                    // Store the response in local storage
                    localStorage.setItem('responseData', JSON.stringify(response));
                    console.log(response)

                    // Optionally, you can redirect or perform any other actions here
                    window.location.href = '/link/'; // Replace with your desired redirect URL

                    // Example of retrieving the stored data later
                    // var storedData = JSON.parse(localStorage.getItem('responseData'));
                },

                error: function (error) {
                    // Handle any errors here
                    console.error('Error:', error);
                }
            });
        }

</script>

{% endblock %}
